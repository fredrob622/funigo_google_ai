
<!-- Fichier : views/pages/departements_form.ejs -->

<%- include('../partials/header', { title: title }) %>

<div class="content content-black"> 
    
    <h2>Rechercher un Département</h2>

    <!-- Conteneur pour nos deux formulaires -->
    <div class="form-container-double" style="display: flex; justify-content: center; gap: 30px; margin-bottom: 20px; flex-wrap: wrap;">
        <!-- Liste déroulante par Nom -->
        <div>
            <label for="dep-nom-select" style="display: block; margin-bottom: 10px;">Par Nom :</label>
            <select id="dep-nom-select" class="dep-select" style="padding: 5px; font-size: 0.9em; border-radius: 8px; min-width: 250px;">
                <option value="" disabled selected>-- Choisissez un département --</option>
                <% listeDepartement.forEach(dep => { %>
                    <!-- L'attribut 'data-numero' est la clé pour la synchronisation ! -->
                    <option value="<%= dep.nom_dep %>" data-numero="<%= dep.num_dep %>"><%= dep.nom_dep %></option>
                <% }); %>
            </select>
        </div>
        <!-- Liste déroulante par Numéro -->
        <div>
            <label for="dep-num-select" style="display: block; margin-bottom: 10px;">Par Numéro :</label>
            <select id="dep-num-select" class="dep-select" style="padding: 5px; font-size: 0.9em; border-radius: 8px; min-width: 150px;">
                <option value="" disabled selected>-- N° --</option>
                <% listeDepartement.forEach(dep => { %>
                    <option value="<%= dep.num_dep %>" data-nom="<%= dep.nom_dep %>"><%= dep.num_dep %></option>
                <% }); %>
            </select>
        </div>
    </div>

<% if (results.length > 0) { %>
    <!-- NOUVEAU : On ajoute le conteneur autour du tableau -->
    <div class="departement-table-container">
        <h3>Résultats pour "<%= searchTerm %>"</h3>
        
        <!-- NOUVEAU : On ajoute la classe "results-table" au tableau -->
        <table class="results-table">
            <thead>
                <tr>
					<th>nb</th>
					<th>Département</th>
					<th>Région</th>
					<th>Superficie en km/</th>
					<th>Population</th>
					<th>Densité</th>
					<th>Préfecture</th>
					<th>Population</th>
					<th>Sous-Préfecture</th>
                </tr>
            </thead>
            <tbody>
                <% results.forEach(departement => { %>
                    <tr>
                        <!-- CORRIGÉ : on utilise la variable 'departement' directement -->
                        <td data-label="N°"><%= departement.num_dep %></td>
                        <td data-label="Département"><%= departement.nom_dep %></td>
                        <td data-label="Région"><%= departement.nom_reg %></td>
                        <td data-label="Superficie"><%= departement.superficie %></td>
                        <td data-label="Population"><%= departement.pop_dep %></td> 
                        <td data-label="Densité"><%= departement.densite %></td> 
                        <td data-label="Préfecture"><%= departement.nom_pref %></td> 
                        <td data-label="Pop. Préf."><%= departement.pop_pref %></td>
                        <td data-label="Sous-Préf."><%= departement.sous_pref %></td> 						 			 
                    </tr>  
                <% }); %>
            </tbody>
        </table>
    </div>
<% } else if (searchTerm) { %>
    <p>Aucun résultat trouvé pour "<%= searchTerm %>".</p>
<% } %>
</div>

<%- include('../partials/footer') %>